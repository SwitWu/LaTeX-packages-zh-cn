% -*- coding: utf-8 -*-
% !TEX program = lualatex
\documentclass[oneside]{book}

\input{manual.sty}
\CodeHigh{lite}
\setcounter{chapter}{4}

\begin{document}

% \chapter{Use Some Libraries}
\chapter{使用扩展库}

\mywarning{本章}

% The \verb!tabularray! package emulates or fixes some commands in other packages.
% To avoid potential conflict, you need to enable them with \verb!\UseTblrLibrary! command.
 \verb!Tabularray! 宏包模仿或修改了其它宏包的一些命令，
为避免冲突，需要使用 \verb!\UseTblrLibrary! 载入这些扩展库。

% \section{Library \texttt{booktabs}}
\section{\texttt{booktabs}库}

% When you write \verb!\UseTblrLibrary{booktabs}!,
% \verb!tabularray! package will define commands \verb!\toprule!, \verb!\midrule!,
% \verb!\bottomrule! and \verb!\cmidrule! inside \verb!tblr! environment.
如果使用了 \verb!\UseTblrLibrary{booktabs}!，
则\verb!Tabularray! 宏包将定义 \verb!\toprule!、 \verb!\midrule!、
\verb!\bottomrule! 和 \verb!\cmidrule! 命令，
这些命令可以直接用于 \verb!tblr! 环境中。

\begin{demohigh}
\begin{tblr}{llll}
\toprule
 Alpha   & Beta  & Gamma   & Delta \\
\midrule
 Epsilon & Zeta  & Eta     & Theta \\
\cmidrule{1-3}
 Iota    & Kappa & Lambda  & Mu    \\
\cmidrule{2-4}
 Nu      & Xi    & Omicron & Pi    \\
\bottomrule
\end{tblr}
\end{demohigh}

% At this moment, \verb!trim! options for \verb!\cmidrule! command are not supported.
% (As a workaround, you may insert an empty column to separate two \verb!\cmidrule!'s.)
% But rule colors are possible just like \verb!\hline! and \verb!\cline! commands.
目前， \verb!\cmidrule! 命令还不支持\verb!trim! 选项
(一种变通方法是插入一个空列分隔两个 \verb!\cmidrule!)。
但是，可以用类似 \verb!\hline! 和 \verb!\cline! 命令的方式指定线条颜色。

\begin{demohigh}
\begin{tblr}{llll}
\toprule[purple3]
 Alpha   & Beta  & Gamma   & Delta \\
\midrule[blue3]
 Epsilon & Zeta  & Eta     & Theta \\
\cmidrule[azure3]{1-3}
 Iota    & Kappa & Lambda  & Mu    \\
\cmidrule[azure3]{2-4}
 Nu      & Xi    & Omicron & Pi    \\
\bottomrule[purple3]
\end{tblr}
\end{demohigh}

% \section{Library \texttt{diagbox}}
\section{ \texttt{diagbox}库}

% When writing \verb!\UseTblrLibrary{diagbox}! in the preamble of the document,
% \verb!tabularray! package loads \verb!diagbox! package,
% and you can use \verb!\diagbox! and \verb!\diagboxthree! commands inside \verb!tblr! environment.
当在导言区使用了\verb!\UseTblrLibrary{diagbox}!后，
\verb!Tabularray! 宏包会载入 \verb!diagbox! 宏包，
然后，就可以在\verb!tblr!环境中使用 \verb!\diagbox! 和\verb!\diagboxthree! 命令排版斜线表头。

\begin{demohigh}
\begin{tblr}{hlines,vlines}
 \diagbox{Aa}{Pp} & Beta & Gamma \\
 Epsilon & Zeta  & Eta \\
 Iota    & Kappa & Lambda \\
\end{tblr}
\end{demohigh}

\begin{demohigh}
\begin{tblr}{hlines,vlines}
 \diagboxthree{Aa}{Pp}{Hh} & Beta & Gamma \\
 Epsilon & Zeta  & Eta \\
 Iota    & Kappa & Lambda \\
\end{tblr}
\end{demohigh}

% You can also use \verb!\diagbox! and \verb!\diagboxthree! commands in math mode.
也可以在数学模式中使用 \verb!\diagbox!和 \verb!\diagboxthree! 命令。
\nopagebreak
\begin{demohigh}
$\begin{tblr}{|c|cc|}
\hline
 \diagbox{X_1}{X_2} & 0 & 1 \\
\hline
  0 & 0.1 & 0.2 \\
  1 & 0.3 & 0.4 \\
\hline
\end{tblr}$
\end{demohigh}

% \section{Library \texttt{siunitx}}
\section{ \texttt{siunitx}库}

% When writing \verb!\UseTblrLibrary{siunitx}! in the preamble of the document,
% \verb!tabularray! package loads \verb!siunitx! package,
% and defines \verb!S! column as \verb!Q! column with \verb!si! key.
当在导言区使用了\verb!\UseTblrLibrary{siunitx}!后，
\verb!Tabularray! 宏包会载入 \verb!siunitx! 宏包，
并定义了\verb!S!列格式，表示带有\verb!si!键的\verb!Q!列格式。

\begin{demohigh}
\begin{tblr}{
  hlines, vlines,
  colspec={
    S[table-format=3.2]
    S[table-format=3.2]
    S[table-format=3.2]
  }
}
 {{{Head}}} & {{{Head}}} & {{{Head}}} \\
   111      &   111      &   111      \\
     2.1    &     2.2    &     2.3    \\
    33.11   &    33.22   &    33.33   \\
\end{tblr}
\end{demohigh}

\begin{demohigh}
\begin{tblr}{
  hlines, vlines,
  colspec={
    Q[si={table-format=3.2},c]
    Q[si={table-format=3.2},c]
    Q[si={table-format=3.2},c]
  }
}
 {{{Head}}} & {{{Head}}} & {{{Head}}} \\
   111      &   111      &   111      \\
     2.1    &     2.2    &     2.3    \\
    33.11   &    33.22   &    33.33   \\
\end{tblr}
\end{demohigh}

% Note that you need to use \underline{triple} pairs of braces to guard non-numeric cells.
注意，需要使用 \underline{三重} 大括号对以确保单元格是非数字模式。

% Also you must use \verb!l!, \verb!c! or \verb!r! to set horizontal alignment for non-numeric cells:
另外，也必须使用 \verb!l!、 \verb!c! 或 \verb!r! 设置非数字单元格的水平对齐方式。

\begin{demohigh}
\begin{tblr}{
  hlines, vlines, columns={6em},
  colspec={
    Q[si={table-format=3.2,table-number-alignment=left},l,blue7]
    Q[si={table-format=3.2,table-number-alignment=center},c,teal7]
    Q[si={table-format=3.2,table-number-alignment=right},r,purple7]
  }
}
 {{{Head}}} & {{{Head}}} & {{{Head}}} \\
   111      &   111      &   111      \\
     2.1    &     2.2    &     2.3    \\
    33.11   &    33.22   &    33.33   \\
\end{tblr}
\end{demohigh}

% Both \verb!S! and \verb!s! columns are supported. In fact, These two columns are defined as follows:
此时，\verb!S! 和 \verb!s! 列格式都可用。
实质上，这两个列格式是按如下方式定义的：
\begin{codehigh}
\NewColumnType{S}[1][]{Q[si={##1},c]}
\NewColumnType{s}[1][]{Q[si={##1},c,cmd=\TblrUnit]}
\end{codehigh}

\end{document}
